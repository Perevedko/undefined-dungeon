<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">

    <link rel="stylesheet" type="text/css" href="style.css">
    <title>undefined dungeon</title>
</head>

<body>
    <canvas id="canvas" width="500" height="500"></canvas>
</body>

<script>
    var canvas = document.getElementById("canvas");
    var ctx = canvas.getContext("2d");

    function drawPlayer() {
        //player.y = canvas.height / 2 - 40;    //player position - middle of canvas - 40
        //player.x = canvas.width / 2 - 40;    //player position - middle of canvas - 40

        loadImage("./assets/player.png").then(playerImage => {
            ctx.drawImage(playerImage, 0, 0, 40, 40);
        })
    }

    function loadImage(url) {
        return new Promise(resolve => {
            const image = new Image();

            image.addEventListener('load', () => {
                resolve(image);
            });

            image.src = url;
        });
    }

    function drawMap() {
        var mapArray = [
            ['3', '3', '3', '3', '3'],
            ['3', '0', '0', '0', '3'],
            ['3', '0', '0', '0', '3'],
            ['3', '0', '0', '0', '3'],
            ['3', '3', '3', '3', '3']
        ];

        for (let i = 0; i < mapArray.length; i++) {
            for (let j = 0; j < mapArray[i].length; j++) {
                if (mapArray[i][j] == 3) {
                    loadImage("./assets/wall.png").then(wallImage => {
                        ctx.drawImage(wallImage, i * 40, j * 40, 40, 40); // последние 2 цифры - размер изображения в пикселях
                    })
                }

                if (mapArray[i][j] == 0) {
                    loadImage("./assets/floor.png").then(floorImage => {
                        ctx.drawImage(floorImage, i * 40, j * 40, 40, 40); // последние 2 цифры - размер изображения в пикселях
                    })
                }
            }
        }
    }

    drawMap();
    drawPlayer();
        
</script>

</html>